(:
for $f in doc("refbib.xml")/bib/livre
	where $f/titre="Data on the Web"
	return
		for $a in $f//auteur
			return ($a/prenom,$a/nom)
:)

(:
<auteurs>{
for $f in doc("refbib.xml")/bib/livre
	return 		
		for $a in $f//auteur
			return <nom>{$a/nom/text(), $a/prenom/text()}</nom>
}</auteurs>
:)

(:
<biblio>{
	for $f in doc("refbib.xml")/bib/livre
		where $f/@annee > 1992 and $f/edition = 'Addison-Wesley'
			return <livre annee="{$f/@annee}">{$f/titre}</livre>
}</biblio>
:)

(:
for $f in doc("refbib.xml")/bib/livre
	order by $f/titre ascending
		return $f
:)

(:
for $a in distinct-values(doc("refbib.xml")/bib/livre/auteur/nom/text())
	return <auteur nom="{$a}">{
		for $f in doc("refbib.xml")/bib/livre
			where $f/auteur/nom/text() = $a
				return $f/titre
	}</auteur>
:)

(:
<resultats>{
	for $t in distinct-values(doc("refbib.xml")/bib/livre/titre/text())
		return <prixmin titre ="{$t}"><prix>{
			min(for $f in doc("refbib.xml")/bib/livre
				where $f/titre/text() = $t
					return $f/prix)
		}</prix></prixmin>

}</resultats>
:)

(:
<resultats>{
	for $t in distinct-values(doc("refbib.xml")/bib/livre/titre/text())
		let $p:= doc("refbib.xml")/bib/livre[titre/text()=$t]/prix
		return
			<prixmin titre = "{$t}"><prix>{
				min($p)
			}</prix></prixmin>

}</resultats>
:)


	for $t in distinct-values(doc("refbib.xml")/bib/livre/titre/text())
	let $a:= doc("refbib.xml")/bib/livre[titre/text()=$t]/auteur
	return
	<livre>{
		if (count($a) > 0)
		then( $a[1],
			if (count($a) > 1)
			then( $a[2],
				if (count($a) > 2)
				then( <et_al></et_al>
				)else()
			)else()
		)else()
	}</livre>
